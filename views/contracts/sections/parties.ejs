<h4>1. DATE AND PARTIES</h4>

<div class="row">
    <div class="col-md-12">
        <p>This Missouri Residential Real Estate Purchase Agreement ("Agreement") is made and entered into on <strong><%= new Date().toLocaleDateString('en-US', {year: 'numeric', month: 'long', day: 'numeric'}) %></strong> ("Effective Date").</p>
        <% if (showExplanations) { %>
            <div class="explanationPanel mt-2 mb-3">
                The Effective Date is when both parties have signed the contract, making it legally binding.
            </div>
        <% } %>
    </div>
</div>

<div class="row mt-3">
    <div class="col-md-6">
        <p>Buyer: <span><strong> <%= offer.buyerName || offer.buyerFullName %></strong></span></p>
    </div>
    <div class="col-md-6">
        <p>Seller: <span><strong> <%= offer.sellerName || offer.sellerFullName %></strong></span></p>
    </div>
</div>
<p><strong>Offer Expiration:</strong> 
<% if (offer.offerExpiration) { %>
    <% 
    // Create a new date object and extract only the date portion (not time)
    const dateObj = new Date(offer.offerExpiration);
    const year = dateObj.getFullYear();
    const month = dateObj.getMonth();
    const day = dateObj.getDate(); 
    
    // Format month name
    const monthNames = ["January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"];
    %>
    <%= monthNames[month] %> <%= day %>, <%= year %>
<% } else { %>
    Not specified
<% } %>
</p>